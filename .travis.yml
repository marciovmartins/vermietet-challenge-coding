sudo: required

services:
  - docker

language: java
jdk:
  - openjdk8

script:
  - sudo mkdir -p build/jacoco/output
  - sudo touch build/jacoco/output/jacoco.exec
  - sudo chmod -Rf 0777 build
  - make install
  - make run
  - sleep 30s
  - make check
  - ls -lha build/jacoco/output

after_success:
  - bash <(curl -s https://codecov.io/bash)

#before_cache:
#  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
#  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
#cache:
#  directories:
#  - $HOME/.gradle/caches
#  - $HOME/.gradle/wrapper